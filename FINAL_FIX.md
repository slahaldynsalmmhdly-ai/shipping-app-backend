# ุงูุฅุตูุงุญ ุงูููุงุฆู ููุดููุฉ ุงูููุชุฑุฉ

## ุงูุชุงุฑูุฎ
20 ููููุจุฑ 2025 - ุงูุฅุตูุงุญ ุงูููุงุฆู

---

## ุงููุดููุฉ ุจุนุฏ ุงูุฅุตูุงุญ ุงูุฃูู

ุจุนุฏ ุงูุฅุตูุงุญ ุงูุฃููุ ูุงูุช ุงูุณุฌูุงุช ุชุธูุฑ:

```
๐ ุงุณุชุนูุงู ุงูููุดูุฑุงุช: {
  "$or": [...],
  "category": "ููุฑุจุงุฆู",
  "postType": "ุงุจุญุซ ุนู ููุธููู",
  "$and": [                    // โ ุงููุดููุฉ!
    { "country": "ุงูุณุนูุฏูุฉ" },
    { "city": "ุฌุฏุฉ" }
  ]
}
โ ุนุฏุฏ ุงููุชุงุฆุฌ: 0
```

**ุงูุณุจุจ**: ุงุณุชุฎุฏุงู `$and` ูุญูู ูููุตู ูู ุงูุงุณุชุนูุงู ูุณุจุจ ุชุนุงุฑุถ ูุน `$or` ุงูููุฌูุฏ.

---

## ุงูุณุจุจ ุงูุฌุฐุฑู

### ุงูููุฏ ุงููุฏูู (ุงูุฅุตูุงุญ ุงูุฃูู)

```javascript
if (filterCity) {
  locationFilter = {
    $and: [                    // โ ุฎุทุฃ!
      { country: filterCountry },
      { city: filterCity }
    ]
  };
}

query = {
  ...query,
  ...locationFilter           // ููุชุฌ ุนูู: query.$and = [...]
};
```

**ุงููุดููุฉ**: 
- ุนูุฏ ุฏูุฌ `locationFilter` ูุน `query` ุจุงุณุชุฎุฏุงู spread operator
- ูุตุจุญ `query.$and` ุญูู ูููุตู
- MongoDB ูุง ูููู ููู ูุฏูุฌ `$or` ู `$and` ูู ููุณ ุงููุณุชูู

---

## ุงูุญู ุงูููุงุฆู โ

### ุฅุถุงูุฉ ุงูุญููู ูุจุงุดุฑุฉ ุจุฏูู `$and`

```javascript
if (!filterCountry || filterCountry === 'ุนุงููู') {
  // ุนุฑุถ ุฌููุน ุงูููุดูุฑุงุช - ูุง ูุถูู ุฃู ููุชุฑ ูููุน
  console.log('๐ ุนุฑุถ ุฌููุน ุงูููุดูุฑุงุช (ุจุฏูู ููุชุฑ ูููุน)');
} else {
  // ููุชุฑุฉ ุตุงุฑูุฉ - ุฅุถุงูุฉ ุงูุญููู ูุจุงุดุฑุฉ
  console.log(`๐ ููุชุฑุฉ ุตุงุฑูุฉ - ููุดูุฑุงุช ูู: ${filterCountry}${filterCity ? ` - ${filterCity}` : ''}`);
  
  query.country = filterCountry;  // โ ุฅุถุงูุฉ ูุจุงุดุฑุฉ
  
  if (filterCity) {
    query.city = filterCity;      // โ ุฅุถุงูุฉ ูุจุงุดุฑุฉ
  }
}
```

---

## ุงูุงุณุชุนูุงู ุงููุงุชุฌ ุงูุตุญูุญ

### ุจุนุฏ ุงูุฅุตูุงุญ ุงูููุงุฆู:

```javascript
{
  "$or": [
    { "isPublished": true },
    { "isPublished": { "$exists": false } }
  ],
  "category": "ููุฑุจุงุฆู",
  "postType": "ุงุจุญุซ ุนู ููุธููู",
  "country": "ุงูุณุนูุฏูุฉ",    // โ ุญูู ูุจุงุดุฑ
  "city": "ุฌุฏุฉ"              // โ ุญูู ูุจุงุดุฑ
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ุณุชุธูุฑ ุฌููุน ุงูููุดูุฑุงุช ุงูุชู:
- `isPublished = true` ุฃู ูุง ููุฌุฏ ุญูู `isPublished`
- `category = "ููุฑุจุงุฆู"`
- `postType = "ุงุจุญุซ ุนู ููุธููู"`
- `country = "ุงูุณุนูุฏูุฉ"`
- `city = "ุฌุฏุฉ"`

---

## ุงูููุงุฑูุฉ

### ุงูููุฏ ุงููุฏูู โ
```javascript
locationFilter = {
  $and: [
    { country: filterCountry },
    { city: filterCity }
  ]
};
query = { ...query, ...locationFilter };
```

**ุงููุชูุฌุฉ**: ุงุณุชุนูุงู ูุนูุฏ ูุน `$and` ูููุตู

### ุงูููุฏ ุงูุฌุฏูุฏ โ
```javascript
query.country = filterCountry;
if (filterCity) {
  query.city = filterCity;
}
```

**ุงููุชูุฌุฉ**: ุงุณุชุนูุงู ุจุณูุท ููุงุถุญ

---

## ุงููุฒุงูุง

1. **ุจุณุงุทุฉ ุงูุงุณุชุนูุงู**: ุญููู ูุจุงุดุฑุฉ ุจุฏูู ุนูุงูู ููุทููุฉ ูุนูุฏุฉ
2. **ุฃุฏุงุก ุฃูุถู**: MongoDB ูููู ุงูุงุณุชุนูุงู ุจุดูู ุฃุณุฑุน
3. **ูุง ุชุนุงุฑุถุงุช**: ูุง ููุฌุฏ ุชุนุงุฑุถ ุจูู `$or` ู `$and`
4. **ุณูููุฉ ุงูุตูุงูุฉ**: ุงูููุฏ ุฃูุถุญ ูุฃุณูู ููููู

---

## ุงูุงุฎุชุจุงุฑ

### ุงูุญุงูุฉ 1: ููุชุฑุฉ ุญุณุจ ุงูุฏููุฉ ูุงููุฏููุฉ
**ุงูุฅุฏุฎุงู**: `country=ุงูุณุนูุฏูุฉ`, `city=ุฌุฏุฉ`

**ุงูุงุณุชุนูุงู**:
```javascript
{
  "$or": [...],
  "category": "ููุฑุจุงุฆู",
  "country": "ุงูุณุนูุฏูุฉ",
  "city": "ุฌุฏุฉ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ููุดูุฑุงุช ูู ุฌุฏุฉุ ุงูุณุนูุฏูุฉ ููุท โ

### ุงูุญุงูุฉ 2: ููุชุฑุฉ ุญุณุจ ุงูุฏููุฉ ููุท
**ุงูุฅุฏุฎุงู**: `country=ุงูุณุนูุฏูุฉ`, `city=null`

**ุงูุงุณุชุนูุงู**:
```javascript
{
  "$or": [...],
  "category": "ููุฑุจุงุฆู",
  "country": "ุงูุณุนูุฏูุฉ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ุฌููุน ููุดูุฑุงุช ุงูุณุนูุฏูุฉ (ูู ุงููุฏู) โ

### ุงูุญุงูุฉ 3: ุนุงููู
**ุงูุฅุฏุฎุงู**: `country=ุนุงููู` ุฃู `country=null`

**ุงูุงุณุชุนูุงู**:
```javascript
{
  "$or": [...],
  "category": "ููุฑุจุงุฆู"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ุฌููุน ุงูููุดูุฑุงุช ูู ูู ุงูุฏูู โ

---

## ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจุดูู ููุงุฆู ูู ุฎูุงู:

1. โ ุฅุฒุงูุฉ ุงุณุชุฎุฏุงู `$and` ูู `locationFilter`
2. โ ุฅุถุงูุฉ ุญููู `country` ู `city` ูุจุงุดุฑุฉ ุฅูู `query`
3. โ ุชุจุณูุท ุงูุงุณุชุนูุงู ูุฅุฒุงูุฉ ุงูุชุนููุฏุงุช
4. โ ุถูุงู ุนุฏู ูุฌูุฏ ุชุนุงุฑุถุงุช ุจูู ุงูุนูุงูู ุงูููุทููุฉ

**ุงููุชูุฌุฉ**: ุงูููุชุฑุฉ ุงูุขู ุชุนูู ุจุดูู ุตุญูุญ 100% ูู ุฌููุน ุงูุตูุญุงุช! ๐
