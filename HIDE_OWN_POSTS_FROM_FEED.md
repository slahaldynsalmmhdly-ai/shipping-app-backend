# ميزة إخفاء المنشورات الخاصة من الصفحة الرئيسية

## الوصف

تم إضافة ميزة تخفي منشورات وإعلانات المستخدم الخاصة من صفحته الرئيسية، بحيث:
- ✅ **لا تظهر** منشوراته القديمة أو الجديدة في صفحته الرئيسية
- ✅ **تظهر بشكل طبيعي** للمستخدمين الآخرين
- ✅ **يمكن رؤيتها** في صفحة الملف الشخصي

## الفائدة

هذه الميزة تحسن تجربة المستخدم من خلال:
1. **تجنب التكرار**: المستخدم يعرف ما نشره، لا حاجة لرؤيته مرة أخرى
2. **تركيز أفضل**: الصفحة الرئيسية تعرض فقط محتوى الآخرين
3. **تجربة نظيفة**: مثل فيسبوك وتويتر وإنستجرام

## التطبيق

تم إضافة فلتر بسيط في بداية حلقة الفلترة في 3 endpoints:

### 1. `routes/postRoutes.js` (السطر 104-107)

```javascript
for (const post of allPosts) {
  // إخفاء منشورات المستخدم الخاصة من صفحته الرئيسية
  if (post.user._id.toString() === req.user.id) {
    continue; // لا تعرض منشوراتي في صفحتي
  }
  // ... باقي الفلترة
}
```

### 2. `routes/shipmentAdRoutes.js` (السطر 100-103)

```javascript
for (const ad of shipmentAds) {
  // إخفاء إعلانات المستخدم الخاصة من صفحته الرئيسية
  if (ad.user._id.toString() === req.user.id) {
    continue; // لا تعرض إعلاناتي في صفحتي
  }
  // ... باقي الفلترة
}
```

### 3. `routes/emptyTruckAdRoutes.js` (السطر 86-89)

```javascript
for (const ad of emptyTruckAds) {
  // إخفاء إعلانات المستخدم الخاصة من صفحته الرئيسية
  if (ad.user._id.toString() === req.user.id) {
    continue; // لا تعرض إعلاناتي في صفحتي
  }
  // ... باقي الفلترة
}
```

## آلية العمل

### قبل الإضافة:
```
المستخدم A يفتح الصفحة الرئيسية
         ↓
يجلب جميع المنشورات (بما فيها منشوراته)
         ↓
يعرض الكل في الصفحة الرئيسية
```

### بعد الإضافة:
```
المستخدم A يفتح الصفحة الرئيسية
         ↓
يجلب جميع المنشورات
         ↓
يفلتر كل منشور:
  ┌─────────────────────────┐
  │ هل المنشور من تأليفي؟   │
  └─────────────────────────┘
           │
    ┌──────┴──────┐
    │             │
   نعم           لا
    │             │
    ↓             ↓
  تخطي      يكمل الفلترة
  (لا يعرض)  (قد يعرض حسب الشروط)
         ↓
يعرض فقط منشورات الآخرين
```

## الاختبار

### خطوات الاختبار:

1. **سجل دخول بحساب A**
2. **انشر منشور جديد**
3. **افتح الصفحة الرئيسية**
4. **النتيجة المتوقعة:** ✅ المنشور **لا يظهر** في الصفحة الرئيسية
5. **افتح الملف الشخصي**
6. **النتيجة المتوقعة:** ✅ المنشور **يظهر** في الملف الشخصي
7. **سجل دخول بحساب B**
8. **افتح الصفحة الرئيسية**
9. **النتيجة المتوقعة:** ✅ منشور A **يظهر** (إذا كان B يتابع A وكان ضمن الـ 15%)

## التوافق

هذه الميزة تعمل بالتوازي مع:
- ✅ نظام الفلترة 15% للمتابعين
- ✅ نظام الإشعارات
- ✅ خوارزمية الترتيب Facebook-style
- ✅ جميع أنواع المحتوى (منشورات، إعلانات شحن، إعلانات شاحنات)

## الملاحظات

- **بسيطة وفعالة**: فلتر واحد في بداية الحلقة
- **لا تؤثر على الأداء**: `continue` يتخطى المنشور مباشرة
- **لا تحتاج تعديل في الواجهة الأمامية**: كل شيء في الباك إند
- **فورية**: تعمل مباشرة بعد رفع التحديثات

## التاريخ

**2025-10-31**: إضافة ميزة إخفاء المنشورات الخاصة من الصفحة الرئيسية
