# ููุชุฑ ุตุงุฑู: ููุน ููุดูุฑุงุช ุงููุชุงุจูุนูู ุชูุงูุงู

## ุงูุชุงุฑูุฎ
2 ููููุจุฑ 2025

## ุงููุดููุฉ

ููุดูุฑุงุช ูุฅุนูุงูุงุช ุงููุชุงุจูุนูู **ูุงูุช ูุง ุชุฒุงู ุชุธูุฑ** ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉุ ุฑุบู ุฌููุน ุงููุญุงููุงุช ุงูุณุงุจูุฉ.

**ุงูุณุจุจ:**
- ุงูููุฏ ุงูุณุงุจู ูุงู ููุฒูู **ุงูุฃููููุฉ** ููุทุ ููู ูุง ูููุน ุงูุธููุฑ
- ููุดูุฑุงุช ุงููุชุงุจูุนูู ูุงูุช ุชูุนุงูู ูุซู ุฃู ููุดูุฑ ุขุฎุฑ
- ูู ููู ููุงู **ููุชุฑ ุตุงุฑู** ูููุนูุง ูู ุงูุธููุฑ

---

## ุงูุญู ุงูููุงุฆู

### ุฅุถุงูุฉ ููุชุฑ `$nin` ูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

**MongoDB Operator `$nin`:**
- ูุนูู "Not In" (ููุณ ุถูู)
- ูุณุชุจุนุฏ ุฃู ูุณุชุฎุฏู ููุฌูุฏ ูู ูุงุฆูุฉ `following`

---

## ุงูุชุนุฏููุงุช ุงููุทุจูุฉ

### 1. ูู ุงุณุชุนูุงู ุงูููุดูุฑุงุช (Post)

**ูุจู:**
```javascript
const posts = await Post.find({ 
  $or: [{ isPublished: true }, { isPublished: { $exists: false } }],
  hiddenFromHomeFeedFor: { $ne: req.user.id },
  user: { $ne: req.user.id } // ุฅุฎูุงุก ููุดูุฑุงุช ุงููุณุชุฎุฏู ููุณู ููุท
})
```

**ุจุนุฏ:**
```javascript
const posts = await Post.find({ 
  $or: [{ isPublished: true }, { isPublished: { $exists: false } }],
  hiddenFromHomeFeedFor: { $ne: req.user.id },
  user: { 
    $ne: req.user.id, // ุฅุฎูุงุก ููุดูุฑุงุช ุงููุณุชุฎุฏู ููุณู
    $nin: following // ุฅุฎูุงุก ููุดูุฑุงุช ุงููุชุงุจูุนูู ุชูุงูุงู โ
  }
})
```

### 2. ูู ุงุณุชุนูุงู ุฅุนูุงูุงุช ุงูุดุญู (ShipmentAd)

**ูุจู:**
```javascript
const shipmentAds = await ShipmentAd.find({ 
  $or: [{ isPublished: true }, { isPublished: { $exists: false } }],
  hiddenFromHomeFeedFor: { $ne: req.user.id },
  user: { $ne: req.user.id } // ุฅุฎูุงุก ุฅุนูุงูุงุช ุงููุณุชุฎุฏู ููุณู ููุท
})
```

**ุจุนุฏ:**
```javascript
const shipmentAds = await ShipmentAd.find({ 
  $or: [{ isPublished: true }, { isPublished: { $exists: false } }],
  hiddenFromHomeFeedFor: { $ne: req.user.id },
  user: { 
    $ne: req.user.id, // ุฅุฎูุงุก ุฅุนูุงูุงุช ุงููุณุชุฎุฏู ููุณู
    $nin: following // ุฅุฎูุงุก ุฅุนูุงูุงุช ุงููุชุงุจูุนูู ุชูุงูุงู โ
  }
})
```

### 3. ูู ุงุณุชุนูุงู ุฅุนูุงูุงุช ุงูุดุงุญูุงุช ุงููุงุฑุบุฉ (EmptyTruckAd)

**ูุจู:**
```javascript
const emptyTruckAds = await EmptyTruckAd.find({ 
  $or: [{ isPublished: true }, { isPublished: { $exists: false } }],
  hiddenFromHomeFeedFor: { $ne: req.user.id },
  user: { $ne: req.user.id } // ุฅุฎูุงุก ุฅุนูุงูุงุช ุงููุณุชุฎุฏู ููุณู ููุท
})
```

**ุจุนุฏ:**
```javascript
const emptyTruckAds = await EmptyTruckAd.find({ 
  $or: [{ isPublished: true }, { isPublished: { $exists: false } }],
  hiddenFromHomeFeedFor: { $ne: req.user.id },
  user: { 
    $ne: req.user.id, // ุฅุฎูุงุก ุฅุนูุงูุงุช ุงููุณุชุฎุฏู ููุณู
    $nin: following // ุฅุฎูุงุก ุฅุนูุงูุงุช ุงููุชุงุจูุนูู ุชูุงูุงู โ
  }
})
```

---

## ููู ูุนูู

### ูุซุงู ุนููู

**ุงูุจูุงูุงุช:**
- ุงููุณุชุฎุฏู ุงูุญุงูู: `user123`
- ูุงุฆูุฉ ุงููุชุงุจูุนูู: `['user456', 'user789', 'user101']`

**ุงูุงุณุชุนูุงู:**
```javascript
user: { 
  $ne: 'user123',           // ููุณ ุงููุณุชุฎุฏู ุงูุญุงูู
  $nin: ['user456', 'user789', 'user101'] // ูููุณ ุฃู ูู ุงููุชุงุจูุนูู
}
```

**ุงููุชูุฌุฉ:**
- โ ููุดูุฑุงุช ูู `user222` (ููุณ ุงููุณุชุฎุฏู ููุง ูุชุงุจูุน)
- โ ููุดูุฑุงุช ูู `user333` (ููุณ ุงููุณุชุฎุฏู ููุง ูุชุงุจูุน)
- โ ููุดูุฑุงุช ูู `user123` (ุงููุณุชุฎุฏู ููุณู)
- โ ููุดูุฑุงุช ูู `user456` (ูุชุงุจูุน)
- โ ููุดูุฑุงุช ูู `user789` (ูุชุงุจูุน)
- โ ููุดูุฑุงุช ูู `user101` (ูุชุงุจูุน)

---

## ุงูููุงุฆุฏ

### 1. ููุชุฑ ุตุงุฑู 100%
- โ **ูุง ููุดูุฑุงุช ูู ุงููุชุงุจูุนูู ุฃุจุฏุงู**
- โ **ูุง ุฅุนูุงูุงุช ูู ุงููุชุงุจูุนูู ุฃุจุฏุงู**
- โ ููุชุฑ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฃุณุฑุน)

### 2. ุฃุฏุงุก ููุชุงุฒ
- โ ุงูููุชุฑ ูุญุฏุซ ูู MongoDB ูุจุงุดุฑุฉ
- โ ูุง ุญุงุฌุฉ ูููุชุฑุฉ ูู JavaScript
- โ ุฃุณุฑุน ูุฃูุซุฑ ููุงุกุฉ

### 3. ุจุณุงุทุฉ ุงูููุฏ
- โ ุณุทุฑ ูุงุญุฏ ููุท: `$nin: following`
- โ ูุงุถุญ ููุจุงุดุฑ
- โ ุณูู ุงูุตูุงูุฉ

---

## ุงูููุงุฑูุฉ

### ุงููุญุงููุงุช ุงูุณุงุจูุฉ

| ุงููุญุงููุฉ | ุงูุทุฑููุฉ | ุงููุชูุฌุฉ |
|----------|---------|---------|
| **1** | ุฅุฒุงูุฉ ุงูุฃููููุฉ (40 ููุทุฉ) | โ ูุง ุชุฒุงู ุชุธูุฑ |
| **2** | ุชูููู ุงููุณุจุฉ ุฅูู 15% | โ ูุง ุชุฒุงู ุชุธูุฑ |
| **3** | ุชูููู ุงููุณุจุฉ ุฅูู 1% | โ ูุง ุชุฒุงู ุชุธูุฑ |
| **4** | ุฅุฒุงูุฉ ุงูุฃููููุฉ ุชูุงูุงู (0%) | โ ูุง ุชุฒุงู ุชุธูุฑ |
| **5 (ุงูุญุงูู)** | **ููุชุฑ `$nin` ุตุงุฑู** | โ **ูุง ุชุธูุฑ ุฃุจุฏุงู** |

### ููุงุฐุง ูุดูุช ุงููุญุงููุงุช ุงูุณุงุจูุฉุ

**ุงููุดููุฉ:**
- ูู ุงููุญุงููุงุช ุงูุณุงุจูุฉ ูุงูุช ุชุนูู ุนูู **ุงูุชุฑุชูุจ** ููุท
- ูู ุชูู ุชููุน **ุงูุธููุฑ** ูู ุงูุฃุณุงุณ
- ููุดูุฑุงุช ุงููุชุงุจูุนูู ูุงูุช ุชูุฌูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุซู ุชูุฑุชูุจ

**ุงูุญู ุงูุญุงูู:**
- **ูุง ูุฌูุจ** ููุดูุฑุงุช ุงููุชุงุจูุนูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃุตูุงู
- ุงูููุชุฑ ูุญุฏุซ ูู ุงูุงุณุชุนูุงู ููุณู
- **ูุง ูููู ุฃู ุชุธูุฑ** ูุฃููุง ุบูุฑ ููุฌูุฏุฉ ูู ุงููุชุงุฆุฌ

---

## ุงูุงุฎุชุจุงุฑ

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

#### 1. ูุณุชุฎุฏู ูุชุงุจุน 10 ุฃุดุฎุงุต
**ุงูุฎุทูุงุช:**
1. ุณุฌูู ุงูุฏุฎูู
2. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. ุชุญูู ูู ุงูููุดูุฑุงุช

**ุงููุชููุน:**
- โ **ูุง ููุดูุฑุงุช** ูู ุงูู 10 ุฃุดุฎุงุต ุงูุฐูู ุชุชุงุจุนูู
- โ **ููุท ููุดูุฑุงุช** ูู ูุณุชุฎุฏููู ุขุฎุฑูู
- โ **100% ูุญุชูู ูุชููุน**

#### 2. ููุดูุฑ ุฌุฏูุฏ ูู ูุชุงุจูุน
**ุงูุฎุทูุงุช:**
1. ุดุฎุต ุชุชุงุจุนู ููุดุฑ ููุดูุฑ ุฌุฏูุฏ
2. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุงููุชููุน:**
- โ **ูุง ูุธูุฑ** ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ **ูุธูุฑ** ูู ุงูุฅุดุนุงุฑุงุช ููุท

#### 3. ุฅุนูุงู ุฌุฏูุฏ ูู ูุชุงุจูุน
**ุงูุฎุทูุงุช:**
1. ุดุฎุต ุชุชุงุจุนู ููุดุฑ ุฅุนูุงู ุดุญู ุฃู ุดุงุญูุฉ ูุงุฑุบุฉ
2. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุงููุชููุน:**
- โ **ูุง ูุธูุฑ** ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ **ูุธูุฑ** ูู ุงูุฅุดุนุงุฑุงุช ููุท

#### 4. ุฅูุบุงุก ุงููุชุงุจุนุฉ
**ุงูุฎุทูุงุช:**
1. ุฃูุบู ูุชุงุจุนุฉ ุดุฎุต
2. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุงููุชููุน:**
- โ ููุดูุฑุงุชู **ุชุธูุฑ ุงูุขู** ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ูุฃูู ูู ูุนุฏ ูู ูุงุฆูุฉ `following`

---

## ุงููููุงุช ุงููุนุฏูุฉ

### `routes/feedRoutes.js`

**ุงูุณุทุฑ 62-69:** ููุชุฑ ุงูููุดูุฑุงุช
```javascript
user: { 
  $ne: req.user.id,
  $nin: following // โ ุฅุถุงูุฉ
}
```

**ุงูุณุทุฑ 85-92:** ููุชุฑ ุฅุนูุงูุงุช ุงูุดุญู
```javascript
user: { 
  $ne: req.user.id,
  $nin: following // โ ุฅุถุงูุฉ
}
```

**ุงูุณุทุฑ 100-107:** ููุชุฑ ุฅุนูุงูุงุช ุงูุดุงุญูุงุช ุงููุงุฑุบุฉ
```javascript
user: { 
  $ne: req.user.id,
  $nin: following // โ ุฅุถุงูุฉ
}
```

---

## ููุงุญุธุงุช ูููุฉ

### 1. ุงูุฅุดุนุงุฑุงุช ูุง ุชุฒุงู ุชุนูู
- โ ููุดูุฑุงุช ุงููุชุงุจูุนูู **ุชุธูุฑ ูู ุงูุฅุดุนุงุฑุงุช**
- โ ูุธุงู ุงูุฅุดุนุงุฑุงุช ูููุตู ุชูุงูุงู
- โ ูุง ุชุฃุซูุฑ ุนูู ุงูุฅุดุนุงุฑุงุช

### 2. ุตูุญุฉ ุงูููู ุงูุดุฎุตู ูุง ุชุฒุงู ุชุนูู
- โ ููููู ุฒูุงุฑุฉ ููู ุงููุชุงุจูุน ูุฑุคูุฉ ููุดูุฑุงุชู
- โ ุงูููุชุฑ ููุท ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ูุง ุชุฃุซูุฑ ุนูู ุตูุญุงุช ุงููููุงุช ุงูุดุฎุตูุฉ

### 3. ุงูุฃุฏุงุก
- โ ุงูููุชุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุณุฑูุน ุฌุฏุงู)
- โ ูุง ุชุฃุซูุฑ ุนูู ุงูุณุฑุนุฉ
- โ ูุฏ ูููู ุฃุณุฑุน (ุนูุงุตุฑ ุฃูู ูููุนุงูุฌุฉ)

---

## ุงูุฎูุงุตุฉ

ุชู ุฅุถุงูุฉ ููุชุฑ ุตุงุฑู ูููุน ููุดูุฑุงุช ูุฅุนูุงูุงุช ุงููุชุงุจูุนูู ูู ุงูุธููุฑ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ **ุชูุงูุงู**! ๐

**ุงูุชุนุฏูู:**
- ุฅุถุงูุฉ `$nin: following` ูู 3 ุงุณุชุนูุงูุงุช

**ุงููุชูุฌุฉ:**
- โ **ูุง ููุดูุฑุงุช ูู ุงููุชุงุจูุนูู** ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ **100% ูุญุชูู ูุชููุน** ูู ูุณุชุฎุฏููู ุขุฎุฑูู
- โ **ุงูุฅุดุนุงุฑุงุช ูุง ุชุฒุงู ุชุนูู** ููููุดูุฑุงุช ุงูุฌุฏูุฏุฉ
- โ **ุฃุฏุงุก ููุชุงุฒ** (ููุชุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)

**ุชู ุจูุฌุงุญ! โ**
