# تحديث نظام المنشورات - من الإعلانات إلى المنشورات العامة

## التاريخ: 2 نوفمبر 2025

## نظرة عامة
تم تحديث النظام لتحويل تطبيق الشحن من نظام الإعلانات المنفصلة (إعلانات الحمولة وإعلانات الشاحنات الفارغة) إلى نظام منشورات موحد مع تصنيفات مرنة.

## التغييرات الرئيسية

### 1. تحديث نموذج Post

#### إضافة حقل التصنيفات
تم إضافة حقل `categories` لدعم التصنيفات التالية:
- **مشروع عادي**: منشورات عامة
- **طلب نقل حمولة**: طلبات نقل البضائع
- **استفسار وسؤال**: أسئلة واستفسارات
- **طلب عمل**: طلبات التوظيف
- **اعلان وظيفة**: إعلانات الوظائف
- **بين معدات شاحنة**: بيع وشراء معدات
- **ورشة لحاجات سواق**: خدمات الورش
- **قطاع طريق**: تحديثات الطرق
- **دينا**: شاحنات دينا
- **بيع قلب**: بيع قطع غيار
- **ورشة**: خدمات الورش
- **فيديو**: محتوى فيديو
- **صورة**: محتوى صور
- **شخص يحتاج نقل**: طلبات نقل شخصية

#### جعل النص اختياري
تم تحديث حقل `text` ليكون اختياريًا (`required: false`) لدعم:
- إرسال صور فقط بدون نص
- إرسال فيديوهات فقط بدون نص
- إرسال صور وفيديوهات معًا بدون نص

### 2. تحديث مسار إنشاء المنشورات

تم تحديث `POST /api/v1/posts` لدعم:
- استقبال التصنيفات من الواجهة الأمامية
- حفظ التصنيفات مع المنشور
- السماح بإنشاء منشورات بدون نص (صور/فيديوهات فقط)

## الميزات الجديدة

### 1. المنشورات بدون نص
يمكن الآن إنشاء منشورات تحتوي على:
- صورة واحدة أو أكثر فقط
- فيديو واحد أو أكثر فقط
- مزيج من الصور والفيديوهات بدون نص

### 2. نظام التصنيفات
- تصنيفات مرنة تغطي جميع حالات الاستخدام
- يمكن إضافة تصنيفات متعددة لمنشور واحد
- سهولة البحث والفلترة حسب التصنيف

## التوافق مع الأنظمة القديمة

### الإعلانات القديمة
- نماذج `ShipmentAd` و `EmptyTruckAd` لا تزال موجودة في قاعدة البيانات
- يمكن الوصول إليها عبر المسارات القديمة
- يُنصح بترحيل البيانات القديمة إلى نظام المنشورات الجديد

### خطة الترحيل (اختيارية)
إذا كنت ترغب في ترحيل الإعلانات القديمة:
1. إنشاء سكريبت لتحويل `ShipmentAd` إلى منشورات بتصنيف "طلب نقل حمولة"
2. إنشاء سكريبت لتحويل `EmptyTruckAd` إلى منشورات بتصنيف مخصص
3. تحديث المراجع في الإشعارات والتعليقات

## متطلبات الواجهة الأمامية

### 1. تحديث واجهة إنشاء المنشور
- إزالة خيارات "نشر إعلان حمولة" و "نشر إعلان شاحنة فارغة"
- إضافة قائمة منسدلة للتصنيفات
- السماح بإرسال صور/فيديوهات بدون نص

### 2. تحديث عرض المنشورات
- عرض التصنيفات على المنشورات
- فلترة المنشورات حسب التصنيف
- دعم عرض المنشورات بدون نص (صور/فيديوهات فقط)

### 3. تحديث البحث
- البحث حسب التصنيف
- فلترة النتائج حسب التصنيف

## الاختبار

### اختبارات يجب إجراؤها:
1. ✅ إنشاء منشور بنص وصور
2. ✅ إنشاء منشور بصور فقط (بدون نص)
3. ✅ إنشاء منشور بفيديو فقط (بدون نص)
4. ✅ إنشاء منشور بتصنيف واحد
5. ✅ إنشاء منشور بتصنيفات متعددة
6. ✅ عرض المنشورات في الصفحة الرئيسية
7. ✅ فلترة المنشورات حسب التصنيف

## الملاحظات

- تم الحفاظ على جميع الميزات الموجودة (التعليقات، الإعجابات، الإشارات، الهاشتاقات)
- نظام الإشعارات يعمل بشكل طبيعي مع المنشورات الجديدة
- لم يتم تغيير منطق الخوارزمية الذكية للصفحة الرئيسية

## الخطوات التالية

1. تحديث الواجهة الأمامية لدعم التصنيفات
2. إضافة واجهة فلترة حسب التصنيف
3. (اختياري) ترحيل الإعلانات القديمة
4. (اختياري) إزالة نماذج ومسارات الإعلانات القديمة بعد الترحيل الكامل
